<!DOCTYPE html>
<html>

    <head>

        <title>AJAX 1 - Text File</title>

    </head>

    <body>

        <button id="button">Get Text File</button>

        <br><br>

        <div id="text">
            
        </div>

        <script>

            // Create event listener
            document.getElementById('button').addEventListener('click', loadText);

            function loadText()
            {
                // Create the XHR object
                var xhr = new XMLHttpRequest();

                // Open - type, url/file, async
                xhr.open('GET', 'samplex.txt', true);


                console.log('READYSTATE: ', xhr.readyState);


                // Optional - used for loaders
                xhr.onprogress = function()
                {
                    console.log('READYSTATE: ', xhr.readyState);
                }



                // HTTP Statuses
                // 200: "OK"
                // 403: "Forbidden"
                // 404: "Not Found"

                xhr.onload = function()
                {
                    console.log('READYSTATE: ', xhr.readyState);

                    // Check status is OK
                    if(this.status == 200)
                    {
                        //console.log(this.responseText);
                        document.getElementById('text').innerHTML = this.responseText;
                    }
                    else if(this.status == 404)
                    {
                        document.getElementById('text').innerHTML = 'Not found';
                    }

                }

                xhr.onerror = function()
                {
                    console.log('Request error...');
                }


                // Ready State values
                // 0: request not initialized 
                // 1: server connection established
                // 2: request received 
                // 3: processing request 
                // 4: request finished and response is ready

/*
                // If using the onreadystatechange property, the ReadyState must be checked to ensure the request has finished processing

                xhr.onreadystatechange = function()
                {
                    console.log('READYSTATE: ', xhr.readyState);
                    if(this.readyState == 4 && this.status == 200)
                    {
                        //console.log(this.responseText);
                    }
                }
*/

                // Send request
                xhr.send();
            }

        </script>

    </body>

</html>
